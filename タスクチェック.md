# LyraCopyMVP 進捗状況・タスクチェック

macOS大容量ファイルコピー支援アプリの開発進捗状況を整理しました。

## 1. コア・アーキテクチャ (Core Architecture)
- [x] **データモデル定義**: `StepID`, `LogLine`, `JobConfig` の実装
- [x] **JSONLロガー実装**: 追記型ログの書き込み・読み込み
- [x] **状態管理 (JobState)**: `ObservableObject` によるUI連携用プロパティ
- [x] **再開ロジック (Resume Logic)**: JSONLログからの再開地点特定機能

## 2. 実行エンジン (JobManager / RsyncWrapper)
- [x] **S01_validate_paths**: パス存在確認、同一/内包チェック完了
- [x] **S02_check_space**: 空き容量チェック完了
- [x] **S03_prepare_dest**: コピー先ディレクトリ作成完了
- [ ] **S04_plan_dryrun**: rsync dry-run 連携 (スタブ状態)
- [ ] **S05_copy_run**: rsync 本番実行・進捗パース (スタブ状態)
- [ ] **S06_post_verify**: 完了後検証ロジック (スタブ状態)
- [ ] **S07_finalize**: 終了処理・サマリ作成 (スタブ状態)
- [ ] **Rsync出力パース**: `progress2` 出力の詳細解析

## 3. ユーザーインターフェース (UI - SwiftUI)
- [x] **メインビュー作成**: プレミアムデザイン、サイドバー、パス選択カード
- [x] **フォルダ選択機能**: `NSOpenPanel` によるディレクトリ選択
- [x] **ダークモード対応**: システム設定連動のカラーテーマ実装
- [ ] **進捗表示パネル**: プログレスバー、速度、残り時間表示 (詳細パース待ち)
- [x] **制御コントロール**: 開始、中止（キャンセル）ボタンの配置
- [ ] **ログ表示ビュー**: JSONLログの表示機能

## 4. エラーハンドリング・堅牢性
- [ ] **エラー表示**: 失敗時の詳細原因のUI表示
- [ ] **リトライ機能**: 失敗ステップからの再試行
- [ ] **安全性強化**: rsync中の中断処理をクリーンに行う (SIGINT送信など)

## 5. 完成度向上・テスト
- [ ] **各種ユニットテスト**: モデル、ロガー、JobManagerの単体テスト
- [x] **パッケージング**: `Package.swift` によるビルド構成の確立
- [ ] **配布用調整**: 必要な権限 (Sandboxing, Permissions) の設定
